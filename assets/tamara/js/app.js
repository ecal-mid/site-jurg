var poster = new Group();
poster.visible = false;
var bleu1 = project.importSVG('img/bleu1.svg', function(item) {
  prepareItem(item);
  item.position = [193, 120];
  item.strokeColor = "blue";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
var bleu2 = project.importSVG('img/bleu2.svg', function(item) {
  prepareItem(item);
  item.position = [200, 220];
  item.strokeColor = "blue";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
var rouge1 = project.importSVG('img/rouge1.svg', function(item) { /////////////
  item = prepareItem(item);
  item.position = [205, 160];
  item.strokeColor = 'red';
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
//////////
var bleu3 = project.importSVG('img/bleu3.svg', function(item) {
  prepareItem(item);
  item.position = [410, 150];
  item.strokeColor = "blue";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
var rouge2 = project.importSVG('img/rouge2.svg', function(item) { /////////////
  prepareItem(item);
  item.position = [420, 160];
  item.strokeColor = 'red';
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
//////////
var bleu4 = project.importSVG('img/bleu4.svg', function(item) {
  prepareItem(item);
  item.position = [580, 160];
  item.strokeColor = "blue";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
var rouge3 = project.importSVG('img/rouge3.svg', function(item) { /////////////

  prepareItem(item);
  item.position = [600, 100];
  item.strokeColor = 'red';
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
//////////
var rouge4 = project.importSVG('img/rouge4.svg', function(item) { /////////////
  prepareItem(item);
  item.position = [580, 260];
  item.strokeColor = 'red';
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
var bleu5 = project.importSVG('img/bleu5.svg', function(item) {
  prepareItem(item);
  item.position = [470, 370];
  item.strokeColor = "blue";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
//////////
var rouge6 = project.importSVG('img/rouge6.svg', function(item) { /////////////
  prepareItem(item);
  item.position = [580, 380];
  item.strokeColor = "red";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
/////////
var rouge5 = project.importSVG('img/rouge5.svg', function(item) { /////////////
  prepareItem(item);
  item.position = [270, 420];
  item.strokeColor = "red";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
var bleu6 = project.importSVG('img/bleu6.svg', function(item) {
  prepareItem(item);
  item.position = [150, 370];
  item.strokeColor = "blue";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
var bleu7 = project.importSVG('img/bleu6.svg', function(item) {
  prepareItem(item);
  item.position = [167, 390];
  item.strokeColor = "blue";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
var bleu8 = project.importSVG('img/bleu8.svg', function(item) {
  prepareItem(item);
  item.position = [220, 400];
  item.strokeColor = "blue";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
//////////
var bleu9 = project.importSVG('img/bleu9.svg', function(item) {
  prepareItem(item);
  item.position = [420, 520];
  item.strokeColor = "blue";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
var rouge7 = project.importSVG('img/rouge7.svg', function(item) {
  prepareItem(item);
  item.position = [430, 520];
  item.strokeColor = "red";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
var bleu10 = project.importSVG('img/bleu10.svg', function(item) {
  prepareItem(item);
  item.position = [390, 600];
  item.strokeColor = "blue";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
//////////
var bleu11 = project.importSVG('img/bleu11.svg', function(item) {
  prepareItem(item);
  item.position = [620, 520];
  item.strokeColor = "blue";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
var rouge8 = project.importSVG('img/rouge8.svg', function(item) {
  prepareItem(item);
  item.position = [610, 560];
  item.strokeColor = "red";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
//////////
var bleu12 = project.importSVG('img/bleu12.svg', function(item) {
  prepareItem(item);
  item.position = [230, 643];
  item.strokeColor = "blue";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
var bleu13 = project.importSVG('img/bleu13.svg', function(item) {
  prepareItem(item);
  item.position = [140, 610];
  item.strokeColor = "blue";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
var rouge9 = project.importSVG('img/rouge9.svg', function(item) {
  prepareItem(item);
  item.position = [200, 660];
  item.strokeColor = "red";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
var bleu14 = project.importSVG('img/bleu14.svg', function(item) {
  prepareItem(item);
  item.position = [178, 780];
  item.strokeColor = "blue";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
var rouge10 = project.importSVG('img/rouge10.svg', function(item) {
  prepareItem(item);
  item.position = [270, 760];
  item.strokeColor = "red";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
//////////
var bleu15 = project.importSVG('img/bleu15.svg', function(item) {
  prepareItem(item);
  item.position = [360, 800];
  item.strokeColor = "blue";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
////////// ROUGE11 ET BLEU16 marchent pas --> Romain coucou help D': ROUGE = crop BLEU = ne s'affiche pas
var rouge11 = project.importSVG('img/rouge11.svg', function(item) {
  prepareItem(item, true);
  item.position = [533, 760];
  item.strokeColor = "red";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
var bleu16 = project.importSVG('img/bleu16.svg', function(item) {
  prepareItem(item);
  item.position = [486, 741];
  item.strokeColor = "blue";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
var bleu17 = project.importSVG('img/bleu17.svg', function(item) {
  prepareItem(item);
  item.position = [629, 680];
  item.strokeColor = "blue";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
//////////
var rouge12 = project.importSVG('img/rouge12.svg', function(item) {
  prepareItem(item);
  item.position = [480, 700];
  item.strokeColor = "red";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
var rouge13 = project.importSVG('img/rouge13.svg', function(item) {
  prepareItem(item);
  item.position = [460, 715];
  item.strokeColor = "red";
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
///////////       TRUCS RIEN A VOIR    //////////
var rondrouge = project.importSVG('img/rondrouge.svg', function(item) {
  prepareItem(item);
  item.position = [160, 820];
  item.strokeColor = "red";
  item.strokeWidth = 20;
  item.strokeColor.alpha = 0.7;
  poster.addChild(item);
});
var rondbleu = project.importSVG('img/rondbleu.svg', function(item) {
  prepareItem(item);
  item.position = [418, 105];
  item.strokeColor = "blue";
  item.strokeColor.alpha = 0.7;
  item.strokeWidth = 20;
  poster.addChild(item);
  poster.fitBounds(view.bounds);
  poster.visible = true;
});
////////////
var triangle = new Path.RegularPolygon(new Point(650, 67), 3, 18);
triangle.fillColor = '#e9e9ff';
triangle.rotate(60);
triangle.fillColor = "red";
triangle.fillColor.alpha = 0.7;
triangle.opacity = 0.7;

poster.addChild(triangle);

triangle.onMouseEnter = function(event) {
  this.fillColor = 'blue';
};

triangle.onMouseLeave = function(event) {
  clearTimeout(triangle.mouseTimeout);
  triangle.mouseTimeout = setTimeout(function() {
    triangle.fillColor = 'red';
  }, 500);
};

/////////

function prepareItem(item, debug) {
  // if (!item) {
  //   debugger
  // }
  if (item.clipped) {
    item.firstChild.remove(); // pour retirer le clipping
    item.clipped = false;
  }
  item = item.children[0];

  item.strokeWidth = 30;
  item.strokeCap = 'butt';
  item.fillColor = null;

  var length = 420;
  var start = -length;
  item.inc = 2;

  item.onFrame = function() {
    showLine(this, start, length);
    start += item.inc;
    if (start > this.length || start < -length) {
      item.inc = -item.inc;
    }
  }

  item.onMouseEnter = function(event) {
    this.inc = 20;
  };

  item.onMouseLeave = function(event) {
    clearTimeout(item.mouseTimeout);
    item.mouseTimeout = setTimeout(function() {
      item.inc = 2;
    }, 500);
  };

  return item;
}

function showLine(path, start, length) {
  path.dashArray = [length, path.closed ? path.length - length : 10000];
  path.dashOffset = -start;
}
